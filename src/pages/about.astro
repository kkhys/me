---
import { getEntry, render } from "astro:content";
import profileImage from "#/assets/images/profile.jpg";
import SEO from "#/components/seo/seo.astro";
import Breadcrumb from "#/components/ui/breadcrumb.astro";
import Image from "#/components/ui/image/image.astro";
import ContentWrapper from "#/features/pages/components/content-wrapper.astro";
import BaseLayout from "#/layouts/base-layout.astro";
import { BASE_URL } from "#/utils/base-url";

const about = await getEntry("pages", "about");

if (!about) {
  return Astro.redirect("/404");
}

const { Content: AboutContent } = await render(about);

const seoImage = `${BASE_URL}/api/og/default.png`;
---

<BaseLayout>
  <SEO
    title="About"
    description={about.data.description}
    image={seoImage}
    slot='seo'
  />
  <Breadcrumb segments={[{ label: "Home", href: "/" }]} />
  <h1 class="page-title">
    About
  </h1>
  <div class="about-profile">
    <Image
      src={profileImage}
      alt="Keisuke Hayashi"
      width={200}
      height={200}
      widths={[200, 400]}
      sizes="200px"
      loading="eager"
      class="about-avatar"
    />
  </div>
  <section class="about-body prose">
    <ContentWrapper content={AboutContent} />
  </section>
</BaseLayout>

<style>
  .about-profile {
    margin-top: 2rem;
  }

  .about-profile :global(.about-avatar) {
    width: 200px;
    height: 200px;
    overflow: hidden;
  }

  .about-profile :global(.about-avatar picture img) {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .about-body {
    margin-top: 2rem;
  }

</style>
