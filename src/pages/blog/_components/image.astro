---
import { Picture } from "astro:assets";

interface Props {
  src: ImageMetadata;
  alt: string;
  placeholder: string;
  title?: string;
}

const { src, alt, placeholder, title, ...props } = Astro.props;

const pictureProps = {
  class:
    "zoom-image cursor-zoom-in select-none w-full rounded-2xl border-[#474747] shadow dark:border dark:shadow-none bg-cover bg-center bg-no-repeat",
  src,
  alt,
  widths: [240, 540, 720, src.width],
  formats: ["avif"],
  style: `background-image: url(${placeholder});`,
  ...props,
};
---

{
    title ? (
      <figure>
        <Picture {...pictureProps} />
        <figcaption class="text-center text-xs text-muted-foreground mt-3">{title}</figcaption>
      </figure>
    ) : (
      <Picture {...pictureProps}/>
    )
}
