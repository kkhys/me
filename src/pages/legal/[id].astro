---
import { type CollectionEntry, getCollection } from "astro:content";
import type { GetStaticPaths } from "astro";
import Layout from "#/layouts/layout.astro";
import Section from "#/pages/legal/_components/section.astro";

interface Props {
  legal: CollectionEntry<"legal">;
}

export const getStaticPaths = (async () => {
  const legals = await getCollection("legal");

  return legals.map((legal) => {
    return {
      params: {
        id: legal.id,
      },
      props: {
        legal,
      },
    };
  });
}) satisfies GetStaticPaths;

const { legal } = Astro.props;
const { title, description } = legal.data;
---

<Layout title={title} description={description} pagefind>
    <Section legal={legal} />
</Layout>
