---
import type { HTMLAttributes } from "astro/types";
import MoveUpRightIcon from "#/components/icons/move-up-right.svg";
import LinkCard from "#/features/blog/components/ui/blocks/link-card.astro";

interface Props extends HTMLAttributes<"a"> {
  href: string;
  "data-link-card"?: string;
}

const { href, ...rest } = Astro.props;
---

{
  Object.hasOwn(rest, "data-link-card") ? (
    <LinkCard href={href} {...rest} />
  ) : (
    href.startsWith('http') ? (
      <a href={href} target="_blank" rel="noreferrer" class="external-link" {...rest}>
        <slot />
        <MoveUpRightIcon class="external-icon" />
      </a>
    ) : (
      <a href={href} {...rest}>
        <slot />
      </a>
    )
  )
}

<style>
  .external-link {
    display: inline-flex;
    align-items: center;
  }

  .external-icon {
    margin-inline: 0.25rem;
    margin-top: 0.125rem;
    width: 0.75rem;
    height: 0.75rem;
  }
</style>
